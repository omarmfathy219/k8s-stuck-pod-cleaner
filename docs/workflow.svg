flowchart TB
    Start[CronJob runs on schedule] --> ScanPods[Scan for pods in Terminating state]
    ScanPods --> Decision{Found stuck pods?}
    Decision -->|No| Exit[Exit successfully]
    Decision -->|Yes| Loop[For each stuck pod]
    
    Loop --> CheckTime[Check how long pod has been terminating]
    CheckTime --> TimeDecision{> 3 minutes?}
    TimeDecision -->|No| Skip[Skip pod and continue]
    TimeDecision -->|Yes| ForceDelete[Force delete pod]
    
    ForceDelete --> CreateEvent[Create Kubernetes event]
    CreateEvent --> Continue[Continue to next pod]
    Continue --> Loop
    
    subgraph "Monitoring and Logging"
    CreateEvent
    end
    
    Skip --> Loop
    
    style Start fill:#ff9800,stroke:#ff9800,color:white
    style Exit fill:#4caf50,stroke:#4caf50,color:white
    style ForceDelete fill:#f44336,stroke:#f44336,color:white
    style CreateEvent fill:#673ab7,stroke:#673ab7,color:white
